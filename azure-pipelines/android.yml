steps:
- pwsh: tools/Install-AndroidBuildTools.ps1
  displayName: âš™ï¸ install android tooling

- task: Cache@2
  inputs:
    key: '"cargo" | "$(Agent.OS)" | "Android"'
    path: $(Build.SourcesDirectory)/src/nerdbank-zcash-rust/target
  displayName: ğŸ§  cache cargo build

- pwsh: ./build_all.ps1 -AndroidEmulatorOnly -AndroidDeviceOnly -Release -SkipCsBindings
  displayName: ğŸ› ï¸ build android
  workingDirectory: src/nerdbank-zcash-rust

- powershell: azure-pipelines/artifacts/_pipelines.ps1 -ArtifactNameSuffix "-$(Agent.JobName)" -Verbose
  failOnStderr: true
  displayName: ğŸ“¢ Publish artifacts
  condition: succeededOrFailed()
